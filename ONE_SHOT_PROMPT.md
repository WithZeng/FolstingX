# FolstingX ä¸€é”®å¼€å‘ Prompt

> å°†ä»¥ä¸‹å†…å®¹å®Œæ•´å¤åˆ¶ï¼Œä¸€æ¬¡æ€§å‘é€ç»™ AIï¼ˆå¦‚ Copilot / Claude / Cursor ç­‰ï¼‰ã€‚
> AI å°†è‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰æ­¥éª¤ï¼Œæ¯æ­¥å®Œæˆåè‡ªæ£€ä¿® bugï¼Œå…¨éƒ¨å®Œæˆåè¾“å‡ºéªŒæ”¶æŠ¥å‘Šã€‚

---

## ä½¿ç”¨æ–¹æ³•

1. æ‰“å¼€ AI å¼€å‘å·¥å…·ï¼ˆVS Code Copilot Chat / Cursor / Claude ç­‰ï¼‰
2. å°†ä¸‹æ–¹ `---START---` åˆ° `---END---` ä¹‹é—´çš„å…¨éƒ¨å†…å®¹å¤åˆ¶ç²˜è´´å‘é€
3. ç­‰å¾… AI è‡ªåŠ¨å®Œæˆæ‰€æœ‰å¼€å‘
4. å¦‚æœ AI ä¸­é€”å› ä¸Šä¸‹æ–‡é™åˆ¶æš‚åœï¼Œå‘é€"ç»§ç»­"å³å¯

---START---

ä½ æ˜¯ FolstingX è½¬å‘é¢æ¿é¡¹ç›®çš„å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆã€‚è¯·æŒ‰ç…§ä»¥ä¸‹æŒ‡ä»¤ï¼Œä»é›¶å¼€å§‹å®Œæˆæ•´ä¸ªé¡¹ç›®çš„å¼€å‘ã€‚

## æ ¸å¿ƒè§„åˆ™ï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆï¼‰

1. **è‡ªåŠ¨æ¨è¿›**ï¼šå®Œæˆä¸€ä¸ªæ­¥éª¤åï¼Œç«‹å³å¼€å§‹ä¸‹ä¸€ä¸ªæ­¥éª¤ï¼Œä¸è¦åœä¸‹æ¥é—®æˆ‘ã€‚
2. **è‡ªæ£€ä¿® bug**ï¼šæ¯ä¸ªæ­¥éª¤å®Œæˆåï¼Œä½ å¿…é¡»ï¼š
   - æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰ç¼–è¯‘é”™è¯¯
   - è¿è¡Œæµ‹è¯•ï¼ˆå¦‚æœ‰ï¼‰
   - å‘ç°é—®é¢˜ç«‹å³ä¿®å¤ï¼Œä¿®å¤åå†æ¬¡æ£€æŸ¥ï¼Œç›´åˆ°æ—  bug
   - è¾“å‡ºç®€çŸ­çš„æ£€æŸ¥ç»“æœï¼ˆâœ… é€šè¿‡ / ğŸ”§ å·²ä¿®å¤ xxxï¼‰
3. **è¿›åº¦æŠ¥å‘Š**ï¼šæ¯å®Œæˆä¸€ä¸ª STEPï¼Œè¾“å‡ºä¸€è¡Œè¿›åº¦ï¼Œä¾‹å¦‚ï¼š`[4/12] âœ… STEP 4 å®Œæˆ - æ ¸å¿ƒè½¬å‘å¼•æ“`
4. **ä¸è¦è·³æ­¥**ï¼šä¸¥æ ¼æŒ‰é¡ºåº STEP 1 â†’ STEP 12 æ‰§è¡Œã€‚
5. **ä¸è¦é—®æˆ‘**ï¼šé‡åˆ°ä¸ç¡®å®šçš„é€‰æ‹©ï¼ŒæŒ‰å·¥ç¨‹æœ€ä½³å®è·µè‡ªè¡Œå†³å®šã€‚
6. **ä¸­æ–‡æ³¨é‡Š**ï¼šä»£ç å…³é”®ä½ç½®ç”¨ä¸­æ–‡æ³¨é‡Šã€‚

---

## é¡¹ç›®æ¦‚è¿°

FolstingX æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ç½‘ç»œè½¬å‘ç®¡ç†é¢æ¿ï¼Œæ ¸å¿ƒåŠŸèƒ½ï¼š
- TCP/UDP ç«¯å£è½¬å‘ï¼Œæ”¯æŒçƒ­æ›´æ–°è§„åˆ™
- ä¸¤å¥—ç‹¬ç«‹å·¥å…·ï¼šXray-coreï¼ˆæµ·å¤–ç›´è¿å…¥ç«™ä»£ç†ï¼‰+ gostï¼ˆèŠ‚ç‚¹é—´åŠ å¯†éš§é“ mwssï¼‰
- å…¥ç«™ä»£ç†ä¸º**å¯é€‰åŠŸèƒ½**ï¼Œé»˜è®¤ä¸å¼€å¯
- å¤šç”¨æˆ·æƒé™ç®¡ç†ï¼ˆRBACï¼‰ï¼Œæµé‡é™é€Ÿï¼Œå®æ—¶ç›‘æ§
- å‰åç«¯åˆ†ç¦»ï¼Œæ”¯æŒ Linux VPS ä¸€é”®éƒ¨ç½²

## æŠ€æœ¯æ ˆï¼ˆå›ºå®šï¼Œä¸å¯æ›´æ”¹ï¼‰

**åç«¯**ï¼šGo 1.21+ / Gin / GORM / SQLite / JWT / WebSocket / zapæ—¥å¿—
**å‰ç«¯**ï¼šVue 3 / TypeScript / Vite / Naive UI / Pinia / ECharts / Axios
**å¤–éƒ¨å·¥å…·**ï¼šXray-coreï¼ˆä»…æµ·å¤–ç›´è¿å…¥ç«™ï¼‰/ gostï¼ˆèŠ‚ç‚¹é—´éš§é“ï¼‰
**éƒ¨ç½²**ï¼šDocker / Systemd / Nginx

---

## STEP 1: é¡¹ç›®éª¨æ¶

åœ¨å½“å‰å·¥ä½œåŒºåˆ›å»ºä»¥ä¸‹ç»“æ„å¹¶åˆå§‹åŒ–ï¼š

**åç«¯ `backend/`**ï¼š
- `go mod init github.com/folstingx/server`
- å®‰è£…ä¾èµ–ï¼šgin, gorm, sqlite-driver, jwt/v5, viper, zap, gorilla/websocket, gopsutil/v3, crypto
- åˆ›å»ºç›®å½•ï¼šcmd/server/, internal/api/, internal/models/, internal/services/, internal/middleware/, internal/database/, pkg/forwarder/, pkg/utils/, config/
- `cmd/server/main.go`ï¼šåˆå§‹åŒ– Ginï¼ŒCORS ä¸­é—´ä»¶ï¼Œè·¯ç”±å ä½ï¼Œç›‘å¬ :8080
- `GET /health` â†’ `{"status":"ok","version":"1.0.0"}`
- `config/config.go`ï¼šç”¨ viper è¯»å– YAML é…ç½®æ–‡ä»¶

**å‰ç«¯ `frontend/`**ï¼š
- Vite + Vue3 + TypeScript åˆå§‹åŒ–
- å®‰è£…ä¾èµ–ï¼švue-router@4, pinia, axios, naive-ui, echarts, vue-echarts
- åŸºç¡€å¸ƒå±€ç»„ä»¶ï¼šä¾§è¾¹æ ï¼ˆLogo + å¯¼èˆªèœå•ï¼‰+ é¡¶éƒ¨æ ï¼ˆç”¨æˆ·ä¿¡æ¯ï¼‰+ ä¸»å†…å®¹åŒº
- è·¯ç”±ï¼š/login, /dashboard, /rules, /nodes, /users, /logs, /settings
- Vite ä»£ç† /api â†’ http://localhost:8080, /ws â†’ ws://localhost:8080
- æš—è‰²ä¸»é¢˜ï¼ˆNaive UI darkThemeï¼‰

**é…ç½®æ–‡ä»¶**ï¼š
- `config/config.example.yaml`ï¼šå®Œæ•´æ³¨é‡Šçš„é…ç½®ç¤ºä¾‹

è‡ªæ£€ï¼šgo build æˆåŠŸ / å‰ç«¯ npm run build æˆåŠŸ / health æ¥å£å¯è®¿é—®

---

## STEP 2: ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

**åç«¯**ï¼š
- `internal/models/user.go`ï¼šUser æ¨¡å‹ï¼ˆid, username, password_hash, role[super_admin/admin/user], api_key, bandwidth_limit, traffic_limit, traffic_used, is_active, expire_at, created_at, updated_atï¼‰
- `internal/database/db.go`ï¼šæ•°æ®åº“åˆå§‹åŒ– + AutoMigrate + é»˜è®¤ç®¡ç†å‘˜ admin/admin123
- `pkg/utils/jwt.go`ï¼šJWT å·¥å…·ï¼ˆAccessToken 2h / RefreshToken 7dï¼‰
- `pkg/utils/crypto.go`ï¼šbcrypt å¯†ç å“ˆå¸Œ
- `internal/middleware/auth.go`ï¼šJWT è®¤è¯ä¸­é—´ä»¶
- `internal/middleware/rbac.go`ï¼šè§’è‰²æƒé™æ£€æŸ¥ä¸­é—´ä»¶
- API æ¥å£ï¼š
  - POST /api/v1/auth/login â†’ è¿”å› access_token + refresh_token
  - POST /api/v1/auth/refresh â†’ åˆ·æ–° token
  - GET /api/v1/auth/profile â†’ å½“å‰ç”¨æˆ·ä¿¡æ¯ï¼ˆéœ€JWTï¼‰
  - PUT /api/v1/auth/password â†’ ä¿®æ”¹å¯†ç ï¼ˆéœ€JWTï¼‰

**å‰ç«¯**ï¼š
- `views/Login.vue`ï¼šç™»å½•è¡¨å•ï¼ˆNaive UIï¼‰ï¼Œç™»å½•æˆåŠŸä¿å­˜ token åˆ° localStorageï¼Œè·³è½¬ /dashboard
- `stores/auth.ts`ï¼šPinia store ç®¡ç† token å’Œç”¨æˆ·ä¿¡æ¯
- `api/index.ts`ï¼šAxios å®ä¾‹ï¼Œè‡ªåŠ¨é™„åŠ  Bearer tokenï¼Œ401 è‡ªåŠ¨è·³è½¬ç™»å½•é¡µ
- è·¯ç”±å®ˆå«ï¼šæœªç™»å½•é‡å®šå‘ /login

è‡ªæ£€ï¼šadmin/admin123 èƒ½ç™»å½• / token åˆ·æ–°æ­£å¸¸ / æ—  token è¿”å› 401 / å‰ç«¯ç™»å½•è·³è½¬æ­£å¸¸

---

## STEP 3: èŠ‚ç‚¹ç®¡ç†

**åç«¯**ï¼š
- `internal/models/node.go`ï¼šNode æ¨¡å‹ï¼ˆid, name, host, ssh_port, ssh_user, ssh_key[åŠ å¯†å­˜å‚¨], location, node_type[entry/relay/exit], is_active, last_check, latency_ms, created_atï¼‰
- `internal/api/nodes.go`ï¼šèŠ‚ç‚¹ CRUDï¼ˆéœ€ç®¡ç†å‘˜æƒé™ï¼‰
  - GET/POST /api/v1/nodes, GET/PUT/DELETE /api/v1/nodes/:id
  - POST /api/v1/nodes/:id/check â†’ TCP ping å¥åº·æ£€æŸ¥
- `internal/services/node_checker.go`ï¼š
  - TCP è¿æ¥æµ‹å»¶è¿Ÿï¼Œç»“æœå†™ latency_ms + last_check
  - åå°å®šæ—¶ä»»åŠ¡æ¯ 60 ç§’æ£€æŸ¥æ‰€æœ‰æ´»è·ƒèŠ‚ç‚¹
  - çŠ¶æ€å˜åŒ–å†™ SystemLog

**å‰ç«¯ `views/Nodes.vue`**ï¼š
- èŠ‚ç‚¹åˆ—è¡¨è¡¨æ ¼ï¼ˆåç§°ã€åœ°å€ã€ç±»å‹ã€ä½ç½®ã€å»¶è¿Ÿã€çŠ¶æ€ï¼‰
- çŠ¶æ€é¢œè‰²ï¼šç»¿ <100ms / é»„ 100-300ms / çº¢ ç¦»çº¿
- æ·»åŠ /ç¼–è¾‘èŠ‚ç‚¹å¼¹çª—ï¼ˆModal + Formï¼‰
- æ‰‹åŠ¨å¥åº·æ£€æŸ¥æŒ‰é’®ã€åˆ é™¤ç¡®è®¤

è‡ªæ£€ï¼šCRUD å…¨éƒ¨æ­£å¸¸ / å¥åº·æ£€æŸ¥æ›´æ–°å»¶è¿Ÿ / å®šæ—¶ä»»åŠ¡è¿è¡Œ

---

## STEP 4: æ ¸å¿ƒè½¬å‘å¼•æ“ï¼ˆTCP/UDPï¼‰

**åç«¯ `pkg/forwarder/`**ï¼š
- `tcp.go`ï¼šTCP è½¬å‘å™¨ - ç›‘å¬ç«¯å£â†’æ¥å—è¿æ¥â†’åŒå‘ io.Copyâ†’ç»Ÿè®¡æµé‡å­—èŠ‚æ•°
- `udp.go`ï¼šUDP è½¬å‘å™¨
- `ratelimit.go`ï¼šä»¤ç‰Œæ¡¶é™é€Ÿå™¨ï¼ˆgoroutine å®‰å…¨ï¼‰
- `forwarder.go`ï¼šç»Ÿä¸€æ¥å£ Forwarder { Start() / Stop() / Stats() }

**`internal/services/forward_manager.go`**ï¼š
- map[ruleID]Forwarder ç®¡ç†æ‰€æœ‰æ´»è·ƒè½¬å‘
- Start(rule) / Stop(ruleID) / Reload(rule) çƒ­æ›´æ–°ï¼ˆä¼˜é›…åœæ­¢æ—§â†’å¯æ–°ï¼‰
- StartAll() å¯åŠ¨æ—¶åŠ è½½æ‰€æœ‰ is_active è§„åˆ™
- æµé‡ç»Ÿè®¡æ¯ 5 ç§’å†™å…¥æ•°æ®åº“

**`internal/models/rule.go`**ï¼šForwardRule æ¨¡å‹ï¼ˆid, name, mode[direct/relay/chain/ix], listen_node_id, listen_port, protocol[tcp/udp/both], inbound_proxy_enabled[é»˜è®¤false], inbound_type[vless_reality/shadowsocks], target_address, target_port, chain_nodes[JSON], lb_strategy, lb_targets[JSON], bandwidth_limit, is_active, traffic_up, traffic_down, connections, owner_id, created_at, updated_atï¼‰

**`internal/api/rules.go`**ï¼š
- CRUD + PUT çƒ­æ›´æ–° + enable/disable + stats
- POST /api/v1/rules/import, GET /api/v1/rules/export

è‡ªæ£€ï¼šåˆ›å»º TCP è§„åˆ™èƒ½å®é™…è½¬å‘ï¼ˆç”¨ curl æµ‹è¯•ï¼‰/ çƒ­æ›´æ–°ç”Ÿæ•ˆ / é™é€Ÿç”Ÿæ•ˆ

---

## STEP 5: å…¥ç«™ä»£ç† & èŠ‚ç‚¹é—´éš§é“

**ä¸¤å¥—ç‹¬ç«‹å·¥å…·ï¼Œå„å¸å…¶èŒï¼š**

**å·¥å…·ä¸€ï¼šXray-core ç®¡ç†å™¨** `internal/services/xray_manager.go`
- ä»…ç”¨äºï¼šæµ·å¤–ç›´è¿ + å¼€å¯å…¥ç«™ä»£ç† â†’ VLESS+Reality å…¥ç«™
- ä¸‹è½½ç®¡ç† xray-core äºŒè¿›åˆ¶
- ç”Ÿæˆ Xray é…ç½®ï¼šVLESS+Reality å…¥ç«™ â†’ ç›´è¿å‡ºç«™è‡³ç›®æ ‡
- é€šè¿‡ Xray gRPC API åŠ¨æ€ç®¡ç†å…¥ç«™
- UUID/Reality keys è‡ªåŠ¨ç”Ÿæˆå­˜æ•°æ®åº“
- å‰ç«¯æ˜¾ç¤º vless:// åˆ†äº«é“¾æ¥å’ŒäºŒç»´ç 

**å·¥å…·äºŒï¼šgost ç®¡ç†å™¨** `internal/services/gost_manager.go`
- ç”¨äºï¼šæ‰€æœ‰éœ€è¦è·¨èŠ‚ç‚¹ä¼ è¾“çš„é“¾è·¯
- é¢æ¿é€šè¿‡ SSH å‘å„èŠ‚ç‚¹ä¸‹å‘ gost äºŒè¿›åˆ¶å¹¶å¯åŠ¨
- è·¨å¢ƒèŠ‚ç‚¹ï¼ˆè¿‡å¢™ï¼‰ï¼šgost mwssï¼ˆWebSocket over TLSï¼‰ä¼ è¾“
- çº¯å¢ƒå¤–èŠ‚ç‚¹é—´ï¼šgost mwsï¼ˆæ—  TLSï¼‰
- inbound_type=shadowsocks æ—¶ï¼šgost SS å…¥ç«™ + mwss å‡ºç«™
- çƒ­æ›´æ–°ï¼šå‘é€ SIGHUP æˆ–é‡å¯ gost è¿›ç¨‹

**å…¥ç«™ä»£ç†è§„åˆ™ï¼š**
- å…¥ç«™ä»£ç†é»˜è®¤ä¸å¼€å¯ï¼Œä¸å¼€å¯æ—¶é¢æ¿ä»…åšç«¯å£è½¬å‘
- æµ·å¤–ç›´è¿ + å¼€å…¥ç«™ â†’ å¿…é¡» vless_realityï¼ˆXray-coreï¼‰
- å›½å†…ä¸­è½¬/IX/é“¾å¼ + å¼€å…¥ç«™ â†’ å¯é€‰ shadowsocksï¼ˆgostï¼‰

è‡ªæ£€ï¼šä¸å¼€å…¥ç«™çš„ä¸­è½¬è§„åˆ™ gost mwss éš§é“æ­£å¸¸ / æµ·å¤–ç›´è¿ vless_reality Xray é…ç½®æ­£ç¡® / ä¸­è½¬ SS å…¥ç«™+mwss æ­£å¸¸

---

## STEP 6: å®æ—¶ç›‘æ§ & WebSocket

**`internal/services/traffic_collector.go`**ï¼š
- æ¯ç§’ä» ForwardManager é‡‡é›†æ‰€æœ‰è§„åˆ™æµé‡å’Œè¿æ¥æ•°
- ç”¨ gopsutil é‡‡é›† CPU/å†…å­˜/ç½‘ç»œ IO
- æ¯ 5 ç§’å†™å…¥ traffic_stats è¡¨ï¼ˆæŒ‰å¤©èšåˆï¼‰
- ç»´æŠ¤æœ€è¿‘ 60 ç§’æ—¶é—´åºåˆ—

**`internal/api/monitor.go`**ï¼š
- WS /ws/monitorï¼šæ¯ç§’æ¨é€å®æ—¶æ•°æ®ï¼ˆç³»ç»ŸæŒ‡æ ‡ + å„è§„åˆ™æµé‡ + æ€»è®¡ï¼‰
- GET /api/v1/monitor/overviewï¼šæ€»æµé‡ã€æ´»è·ƒè§„åˆ™æ•°ã€åœ¨çº¿èŠ‚ç‚¹æ•°
- GET /api/v1/monitor/trafficï¼šå†å²å›¾è¡¨æ•°æ®ï¼ˆperiod=day/week/monthï¼‰

**å‰ç«¯ `views/Dashboard.vue`**ï¼š
- é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡ï¼šæ€»ä¸Šè¡Œ/ä¸‹è¡Œã€æ´»è·ƒè§„åˆ™ã€åœ¨çº¿èŠ‚ç‚¹ã€å½“å‰è¿æ¥
- ECharts å®æ—¶æŠ˜çº¿å›¾ï¼ˆæœ€è¿‘ 60 ç§’æµé‡ï¼‰
- CPU/å†…å­˜ä»ªè¡¨ç›˜
- å„è§„åˆ™æµé‡æ’è¡Œè¡¨
- å…¨éƒ¨é€šè¿‡ WebSocket å®æ—¶æ›´æ–°ï¼Œæ–­çº¿ 3 ç§’è‡ªåŠ¨é‡è¿

è‡ªæ£€ï¼šWebSocket æ­£å¸¸å»ºç«‹ / å›¾è¡¨æ¯ç§’æ›´æ–° / æ–­çº¿é‡è¿æ­£å¸¸

---

## STEP 7: å‰ç«¯è§„åˆ™ç®¡ç†é¡µ

**`views/Rules.vue`**ï¼š
- è§„åˆ™åˆ—è¡¨è¡¨æ ¼ï¼šåç§°ã€æ¨¡å¼ã€ç«¯å£ã€ç›®æ ‡ã€åè®®ã€å…¥ç«™ç±»å‹ã€çŠ¶æ€ï¼ˆè¿è¡Œ/åœæ­¢/é”™è¯¯ï¼‰ã€è¿æ¥æ•°ã€ä»Šæ—¥æµé‡ã€æ“ä½œæŒ‰é’®
- æœç´¢è¿‡æ»¤
- æ–°å»ºè§„åˆ™æŒ‰é’®

**`components/RuleEditor.vue`**ï¼šåˆ†æ­¥è¡¨å•ï¼ˆStepperï¼‰ï¼š
- ç¬¬1æ­¥ åŸºæœ¬ä¿¡æ¯ï¼šè§„åˆ™åã€è½¬å‘æ¨¡å¼ï¼ˆæµ·å¤–ç›´è¿/ä¸­è½¬/IX/é“¾å¼ï¼‰ã€å…¥ç«™ä»£ç†å¼€å…³
  - æµ·å¤–ç›´è¿å¼€å…¥ç«™ï¼šè‡ªåŠ¨é”å®š vless_realityï¼ˆXray-coreï¼‰ï¼Œé…ç½®ä¼ªè£…åŸŸå
  - ä¸­è½¬å¼€å…¥ç«™ï¼šå¯é€‰ shadowsocksï¼ˆgostï¼‰ï¼Œé…ç½® SS å¯†ç +åŠ å¯†ç®—æ³•
- ç¬¬2æ­¥ å…¥ç«™é…ç½®ï¼šç›‘å¬èŠ‚ç‚¹ã€ç«¯å£ã€åè®®
- ç¬¬3æ­¥ å‡ºç«™é…ç½®ï¼šç›®æ ‡åœ°å€ç«¯å£ï¼ˆé“¾å¼å¯æ·»åŠ å¤šä¸­é—´èŠ‚ç‚¹æ‹–æ‹½æ’åºã€LB å¤šå‡ºå£é…ç½®ï¼‰
- ç¬¬4æ­¥ é«˜çº§è®¾ç½®ï¼šå¸¦å®½é™é€Ÿ
- ç¬¬5æ­¥ ç¡®è®¤ä¿å­˜ï¼Œvless_reality æ˜¾ç¤ºåˆ†äº«é“¾æ¥

è‡ªæ£€ï¼šè§„åˆ™åˆ—è¡¨æ­£ç¡® / åˆ†æ­¥è¡¨å•é€»è¾‘é€šç•… / ä¿å­˜åçƒ­åŠ è½½ç”Ÿæ•ˆ / è¡¨å•éªŒè¯å®Œæ•´

---

## STEP 8: ç”¨æˆ·ç®¡ç† & æƒé™

**åç«¯ `internal/api/users.go`**ï¼š
- ç”¨æˆ· CRUDï¼ˆadmin ä»¥ä¸Šæƒé™ï¼‰
- POST /api/v1/users/:id/reset-trafficï¼šé‡ç½®æµé‡
- æƒé™æ§åˆ¶ï¼šsuper_admin ç®¡æ‰€æœ‰ / admin ç®¡è‡ªå·±åˆ›å»ºçš„ user / user ç®¡è¢«åˆ†é…çš„è§„åˆ™
- æµé‡/è¿‡æœŸæ£€æŸ¥ä¸­é—´ä»¶ï¼šè¶…é™è¿”å› 403
- API Key è®¤è¯ï¼šX-API-Key header

**å‰ç«¯ `views/Users.vue`**ï¼š
- ç”¨æˆ·åˆ—è¡¨ï¼ˆè§’è‰²å¾½ç« ã€æµé‡è¿›åº¦æ¡ã€è¿‡æœŸæ—¶é—´ã€çŠ¶æ€ï¼‰
- åˆ›å»º/ç¼–è¾‘ç”¨æˆ·ï¼ˆè§’è‰²ã€å¸¦å®½é™åˆ¶ã€æµé‡é™åˆ¶ã€è¿‡æœŸæ—¶é—´ï¼‰
- é‡ç½®æµé‡æŒ‰é’®

è‡ªæ£€ï¼šä¸åŒè§’è‰²æƒé™éš”ç¦»æ­£ç¡® / æµé‡è¶…é™æ‹’ç» / è¿‡æœŸç”¨æˆ·æ— æ³•ç™»å½• / API Key è®¤è¯æ­£å¸¸

---

## STEP 9: è´Ÿè½½å‡è¡¡ & æ•…éšœè½¬ç§»

**`pkg/forwarder/loadbalancer.go`**ï¼š
- ç­–ç•¥ï¼šRoundRobin / WeightedRoundRobin / Random / LeastConn / Failover
- LBTarget ç»“æ„ï¼šAddress, Port, Weight, IsBackup, IsHealthy
- æ¯ä¸ªç›®æ ‡ç‹¬ç«‹å¥åº·æ£€æŸ¥ï¼ˆTCP è¿æ¥ï¼Œè¶…æ—¶ 3 ç§’ï¼‰
- è¿ç»­ 3 æ¬¡å¤±è´¥æ ‡è®°ä¸å¥åº·ï¼Œä»è½®è¯¢ç§»é™¤
- æ¯ 30 ç§’é‡è¯•ä¸å¥åº·ç›®æ ‡ï¼Œæ¢å¤åé‡æ–°åŠ å…¥
- çŠ¶æ€å˜åŒ–å†™ SystemLog + WebSocket é€šçŸ¥

**å‰ç«¯**ï¼šRuleEditor å‡ºç«™æ­¥éª¤æ”¯æŒæ·»åŠ å¤šä¸ª LB ç›®æ ‡ï¼Œé€‰æ‹©ç­–ç•¥

è‡ªæ£€ï¼šè½®è¯¢åˆ†é…æ­£ç¡® / ç›®æ ‡ä¸‹çº¿è‡ªåŠ¨ç§»é™¤ / æ¢å¤åé‡æ–°åŠ å…¥

---

## STEP 10: æ—¥å¿—ç³»ç»Ÿ & æ‰¹é‡å¯¼å…¥å¯¼å‡º

**`internal/api/logs.go`**ï¼š
- GET /api/v1/logsï¼ˆæ”¯æŒ level/module/rule_id/æ—¶é—´èŒƒå›´è¿‡æ»¤åˆ†é¡µï¼‰
- DELETE /api/v1/logs
- æ—¥å¿—åŒå†™ï¼šæ•°æ®åº“ï¼ˆ7 å¤©ï¼‰+ æ–‡ä»¶ logs/app-YYYY-MM-DD.logï¼ˆ30 å¤©è½®è½¬ï¼‰

**æ‰¹é‡å¯¼å…¥å¯¼å‡º**ï¼š
- GET /api/v1/rules/export?format=json&ids=1,2,3
- POST /api/v1/rules/importï¼ˆmultipart/form-dataï¼Œæ”¯æŒ skip/overwrite/rename å†²çªç­–ç•¥ï¼‰

**å‰ç«¯**ï¼š
- `views/Logs.vue`ï¼šæ—¥å¿—åˆ—è¡¨ + ç­›é€‰ + WebSocket å®æ—¶è¿½å°¾ + æ¸…ç©ºç¡®è®¤
- Rules é¡µï¼šå¤šé€‰ checkbox + æ‰¹é‡å¯¼å‡ºæŒ‰é’® + å¯¼å…¥æŒ‰é’® + å¯¼å…¥é¢„è§ˆå¼¹çª—

è‡ªæ£€ï¼šæ—¥å¿—è¿‡æ»¤æ­£å¸¸ / å¯¼å‡º JSON å¯é‡æ–°å¯¼å…¥ / å†²çªå¤„ç†æ­£ç¡®

---

## STEP 11: API æ–‡æ¡£ & å®‰å…¨åŠ å›º

**Swagger**ï¼šç”¨ swaggo/swag ä¸ºæ‰€æœ‰æ¥å£æ·»åŠ æ³¨é‡Šï¼Œ/swagger/index.html å¯è®¿é—®

**é€Ÿç‡é™åˆ¶ `internal/middleware/ratelimit.go`**ï¼š
- æœªè®¤è¯ï¼šæ¯ IP æ¯åˆ†é’Ÿ 30 æ¬¡
- å·²è®¤è¯ï¼šæ¯ç”¨æˆ·æ¯åˆ†é’Ÿ 1000 æ¬¡
- ç™»å½•ï¼šæ¯ IP æ¯åˆ†é’Ÿ 5 æ¬¡
- è¿ç»­ 5 æ¬¡å¤±è´¥é”å®š 15 åˆ†é’Ÿ

è‡ªæ£€ï¼šSwagger é¡µé¢å¯è®¿é—® / è¶…é™è¿”å› 429 / è´¦å·é”å®šæ­£å¸¸

---

## STEP 12: è‡ªåŠ¨åŒ–éƒ¨ç½²

**`scripts/install.sh`**ï¼š
- æ£€æµ‹å‘è¡Œç‰ˆï¼ˆUbuntu/Debian/CentOSï¼‰
- å®‰è£…ä¾èµ– â†’ ä¸‹è½½ç¼–è¯‘ â†’ /opt/folstingx/ å®‰è£… â†’ éšæœº JWT Secret â†’  Systemd æœåŠ¡ â†’ Nginx åå‘ä»£ç† â†’ æ˜¾ç¤ºè®¿é—®åœ°å€å’Œé»˜è®¤å¯†ç 

**`scripts/update.sh`**ï¼šå¤‡ä»½ â†’ ä¸‹è½½æ–°ç‰ˆ â†’ åœæ­¢ â†’ æ›¿æ¢ â†’ è¿ç§»æ•°æ®åº“ â†’ å¯åŠ¨ â†’ å¤±è´¥å›æ»š

**`docker/Dockerfile`**ï¼šå¤šé˜¶æ®µæ„å»ºï¼ˆGo + Node ç¼–è¯‘ â†’ æœ€å°è¿è¡Œé•œåƒï¼‰
**`docker/docker-compose.yml`**ï¼šserver + nginx + æ•°æ®å·

**`/etc/systemd/system/folstingx.service`**ï¼šè‡ªåŠ¨é‡å¯ã€ç½‘ç»œå°±ç»ªåå¯åŠ¨

è‡ªæ£€ï¼šDocker æ„å»ºæˆåŠŸ / install.sh è¯­æ³•æ£€æŸ¥é€šè¿‡ / Systemd é…ç½®æ­£ç¡®

---

## å®Œæˆå

æ‰€æœ‰ 12 ä¸ª STEP å®Œæˆåï¼Œè¾“å‡ºæœ€ç»ˆéªŒæ”¶æŠ¥å‘Šï¼š

```
========== FolstingX å¼€å‘å®ŒæˆæŠ¥å‘Š ==========

[1/12] âœ… é¡¹ç›®éª¨æ¶
[2/12] âœ… ç”¨æˆ·è®¤è¯
[3/12] âœ… èŠ‚ç‚¹ç®¡ç†
[4/12] âœ… è½¬å‘å¼•æ“
[5/12] âœ… å…¥ç«™ä»£ç† & éš§é“
[6/12] âœ… å®æ—¶ç›‘æ§
[7/12] âœ… è§„åˆ™ç®¡ç†é¡µ
[8/12] âœ… ç”¨æˆ·ç®¡ç†
[9/12] âœ… è´Ÿè½½å‡è¡¡
[10/12] âœ… æ—¥å¿— & å¯¼å…¥å¯¼å‡º
[11/12] âœ… APIæ–‡æ¡£ & å®‰å…¨
[12/12] âœ… è‡ªåŠ¨åŒ–éƒ¨ç½²

ä¿®å¤çš„ bug æ•°é‡ï¼šX
åˆ›å»ºçš„æ–‡ä»¶æ•°é‡ï¼šX
æ€»ä»£ç è¡Œæ•°ï¼šçº¦ X è¡Œ

å¯åŠ¨æ–¹å¼ï¼š
  åç«¯ï¼šcd backend && go run cmd/server/main.go
  å‰ç«¯ï¼šcd frontend && npm run dev
  é»˜è®¤è´¦å·ï¼šadmin / admin123
```

ç°åœ¨å¼€å§‹æ‰§è¡Œ STEP 1ã€‚

---END---
